@model IEnumerable<AsinToSku>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<br />
<div class="row">
    <div class="col-6">
        <h2 class="text-primary">Asin To Sku </h2>
    </div>
</div>
<br />
<div class="row">
    <div class="col-6 text-right">
        <a class="btn btn-primary" asp-action="Upsert" style="background-color:forestgreen">
            <i class="fas fa-plus"></i> &nbsp; Add Asin-Sku</a>
    </div>
</div>
<br />
<div class="p-5 border rounded" style="width:70%">
    <table id="tblData" class="table table-striped table-bordered" style="width:100%">
        <thead class="thead-dark">
            <tr class="table-info">
                <th>ImageUrl</th>
                <th>Asin</th>
                <th>SKU</th>
                <th>China Name</th>
                <th></th>
            </tr>
        </thead>
        @foreach (AsinToSku ask in Model)
        {
            <tr>
                @if (ask.ImageUrl != null)
                {
                    <td><img src=@ask.ImageUrl.ToString() alt="Product Image" style="height:70px; width: 70px" /></td>
                }
                else
                {
                    <td></td>
                }
                <td>@ask.Asin</td>
                <td>@ask.Sku</td>
                <td>@ask.ChinaName</td>
                <td>
                    <div class="text-center">
                        <a href="/Admin/AsinToSku/Upsert/@ask.Id" class="btn btn-success text-white" style="cursor:pointer"
                       data-toggle="tooltip" data-placement="top" title="Edit Asin">
                            <i class="fas fa-edit"></i>
                        </a>
                        <a onclick="Delete('/Admin/AsinToSku/Delete/@ask.Id')" class="btn btn-danger text-white" style="cursor:pointer"
                       data-toggle="tooltip" data-placement="top" title="Delete Asin">
                            <i class="fas fa-trash-alt"></i>
                        </a>
                    </div>
                </td>
            </tr>
        }
    </table>
</div>

@section Scripts{
    <script>
        $(document).ready(function () {
            $('#tblData').DataTable({ "order": [[1, "asc"]], "pageLength": 100 });
        });</script>
        <script>
        function Delete(url) {
            swal({
                title: "Are you sure you want to delete?",
                text: "You will not be able to restore the data!",
                icon: "warning",
                buttons: true,
                dangerMode: true
            }).then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        type: "DELETE",
                        url: url,
                        success: function (data) {
                            if (data.success) {
                                toastr.success(data.message);
                                // Refresh the page after a short delay to allow the toastr message to display
                                setTimeout(function () {
                                    window.location.reload();
                                }, 1000);
                            }
                            else {
                                toastr.error(data.message);
                            }
                        }
                    })
                }
            })
        }
        </script>
    }
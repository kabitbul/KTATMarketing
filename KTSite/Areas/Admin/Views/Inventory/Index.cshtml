@model IEnumerable<Product>
@{ Layout = "~/Views/Shared/_Layout.cshtml"; }

<br />
<div class="row">
    <div class="col-6">
        <h2 class="text-primary">Inventory</h2>
    </div>
</div>

<br />
<div class="p-4 border rounded">
    <table id="tblData" class="table table-striped table-bordered" style="width:100%">
        <thead class="thead-dark">
            <tr class="table-info">
                <th>Image</th>
                <th>Product</th>
                <th>Inventory</th>
                <th>On The Way</th>
                <th>Cost</th>
                <th>Warehouse</th>
                <th>ReStock</th>
                <th>DailyAvg(3 days)</th>
                <th>DailyAvg(Week)</th>
                <th>Days to OOS</th>
            </tr>
        </thead>
        @foreach (Product product in Model)
        {
<tr>
    @if (product.ImageUrl != null)
    {
<td><img src=@product.ImageUrl.ToString() alt="Product Image" style="height:70px; width: 70px" /></td>
 }
else
{
<td></td>
   }
    <td>@product.ProductName</td>
    <td>@product.InventoryCount</td>
    <td>@product.OnTheWayInventory</td>
    <td>@product.Cost$</td>
    @if (@product.OwnByWarehouse)
      { <td>Yes</td> }else { <td>No</td>}
    @if (@product.ReStock)
    {<td>Yes</td>}else{<td>No</td> }
    <td>@ViewBag.getDailyAvg(product.Id,3).ToString("0.00")</td>
    <td>@ViewBag.getDailyAvg(product.Id,7).ToString("0.00")</td>
    @if (ViewBag.getPaintData(product.Id))
    {  <td style="font-weight:bold;color:red">@ViewBag.getDaysToOOS(product.Id)</td>}else { <td>@ViewBag.getDaysToOOS(product.Id)</td>}
</tr>}
    </table>
</div>

@section Scripts{
    <script>
        $(document).ready(function () {
            $('#tblData').DataTable({ "order": [[9, "asc"]], "pageLength": 100 });
        });</script>
}